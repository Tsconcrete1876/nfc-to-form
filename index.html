<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>NFC to Google Form</title>
</head>
<body>
  <h2>請掃描 NFC 標籤...</h2>
  <p id="status">等待中...</p>

  <script>
    async function readNFC() {
      if ("NDEFReader" in window) {
        const ndef = new NDEFReader();
        try {
          await ndef.scan();
          document.getElementById("status").textContent = "請靠近 NFC 標籤...";
          ndef.onreading = event => {
            const record = event.message.records[0];
            const textDecoder = new TextDecoder(record.encoding || "utf-8");
            const id = textDecoder.decode(record.data);

            // 替換為你的 Google 表單連結 + entry ID
            const formUrl = "https://docs.google.com/forms/d/e/iXm2c9xB2kfW16uXA/formResponse?entry.680740836=" + encodeURIComponent(id);

            document.getElementById("status").textContent = "讀取成功，跳轉中...";
            window.location.href = formUrl;
          };
        } catch (error) {
          document.getElementById("status").textContent = "NFC 錯誤：" + error;
        }
      } else {
        document.getElementById("status").textContent = "這台裝置不支援 Web NFC。請使用 Android Chrome。";
      }
    }

    readNFC();
  </script>
</body>
</html>
